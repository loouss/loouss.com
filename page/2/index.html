<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Loouss</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Loouss">
<meta property="og:url" content="https://loouss.github.io/page/2/index.html">
<meta property="og:site_name" content="Loouss">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Loouss">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Loouss" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 4.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Loouss</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://loouss.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-composer" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/05/08/composer/" class="article-date">
  <time datetime="2020-05-08T15:00:39.000Z" itemprop="datePublished">2020-05-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/05/08/composer/">composer</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>Composer 是 PHP 的一个依赖管理工具。它允许你申明项目所依赖的代码库，它会在你的项目中为你安装他们。</p>
<h2 id="安装composer"><a href="#安装composer" class="headerlink" title="安装composer"></a>安装composer</h2><p>下载地址: <a href="https://mirrors.aliyun.com/composer/composer.phar" target="_blank" rel="noopener">https://mirrors.aliyun.com/composer/composer.phar</a></p>
<ul>
<li>LIKE UNIX ：</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv composer.phar /usr/local/bin/composer</span><br></pre></td></tr></table></figure>

<ul>
<li>WIN ：</li>
</ul>
<p>设置系统的环境变量PATH。<br>在 composer.phar 同级目录下新建文件 composer.bat :</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\bin&gt;echo @php "%~dp0composer.phar" %*&gt;composer.bat</span><br></pre></td></tr></table></figure>

<ul>
<li>验证安装</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">composer -v</span><br></pre></td></tr></table></figure>

<h2 id="包版本"><a href="#包版本" class="headerlink" title="包版本"></a>包版本</h2><p>在前面的例子中，我们引入的 monolog 版本指定为 <code>1.0.*</code>。这表示任何从 <code>1.0</code> 开始的开发分支，它将会匹配 <code>1.0.0</code>、<code>1.0.2</code> 或者 <code>1.0.20</code>。</p>
<p>版本约束可以用几个不同的方法来指定。</p>
<table>
<thead>
<tr>
<th align="left">名称</th>
<th align="left">实例</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">确切的版本号</td>
<td align="left"><code>1.0.2</code></td>
<td align="center">你可以指定包的确切版本。</td>
</tr>
<tr>
<td align="left">范围</td>
<td align="left"><code>&gt;=1.0</code> <code>&gt;=1.0,&lt;2.0</code> `&gt;=1.0,&lt;1.1</td>
<td align="center">&gt;=1.2`</td>
</tr>
<tr>
<td align="left">通配符</td>
<td align="left"><code>1.0.*</code></td>
<td align="center">你可以使用通配符<code>*</code>来指定一种模式。<code>1.0.*</code>与<code>&gt;=1.0,&lt;1.1</code>是等效的。</td>
</tr>
<tr>
<td align="left">赋值运算符</td>
<td align="left"><code>~1.2</code></td>
<td align="center">这对于遵循语义化版本号的项目非常有用。<code>~1.2</code>相当于<code>&gt;=1.2,&lt;2.0</code>。</td>
</tr>
</tbody></table>
<blockquote>
<p>~ (波浪号运算符) ，<code>~1.2</code> 相当于 <code>&gt;=1.2,&lt;2.0</code></p>
</blockquote>
<h2 id="composer-lock-锁文件"><a href="#composer-lock-锁文件" class="headerlink" title="composer.lock 锁文件"></a>composer.lock 锁文件</h2><p>在安装依赖包时，composer 会把安装时确切的版本号写入<code>composer.lock</code> 文件。</p>
<p>通常情况下，需要提交 <code>composer.lock</code> 文件，因为 <code>install</code> 命令将会检查锁文件是否存在，如果存在，它将下载指定的版本。</p>
<p>这意味着，任何人建立项目都将下载与指定版本完全相同的依赖。你的持续集成服务器、生产环境、你团队中的其他开发人员、每件事、每个人都使用相同的依赖，从而减轻潜在的错误对部署的影响。即使你独自开发项目，在六个月内重新安装项目时，你也可以放心的继续工作，即使从那时起你的依赖已经发布了许多新的版本。</p>
<p>如果不存在 <code>composer.lock</code> 文件，Composer 将读取 <code>composer.json</code> 并创建锁文件。</p>
<p>如果你需要更新依赖包，可以执行 <code>composer update</code> 命令，这将获取最新匹配的版本更新（根据 <code>composer.json</code> 文件）同时也会更新 <code>composer.lock</code> 文件。</p>
<h2 id="自动加载"><a href="#自动加载" class="headerlink" title="自动加载"></a>自动加载</h2><p>安装依赖包时，composer 会生成 <code>vendor/autoload.php</code> 文件，引入这个文件即可实现自动加载。</p>
<p>自定义命名空间加载也可以在 <code>composer.json</code> 的 <code>autoload</code> 字段中增加自己的命名空间与文件映射。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"autoload"</span>: &#123;</span><br><span class="line">        <span class="attr">"psr-4"</span>: &#123;<span class="attr">"App\\"</span>: <span class="string">"app/"</span>&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>composer 将注册一个 <a href="http://www.php-fig.org/psr/psr-4/" target="_blank" rel="noopener">PSR-4</a> autoloader 到  <code>App</code> 命名空间。</p>
<h2 id="composer-配置"><a href="#composer-配置" class="headerlink" title="composer 配置"></a>composer 配置</h2><h4 id="环境变量"><a href="#环境变量" class="headerlink" title="环境变量"></a>环境变量</h4><ul>
<li><p><code>COMPOSER_HOME</code> </p>
<p>  默认值：</p>
<ul>
<li><p>like unix <code>/home//.composer</code></p>
</li>
<li><p>OSX <code>/Users//.composer</code></p>
</li>
<li><p>Windows <code>C:\Users\AppData\Roaming\Composer</code></p>
<p>可以在 <code>COMPOSER_HOME</code>  目录中配置  <code>config.json</code> 文件，在执行 <code>composer update</code> 或者 <code>composer install</code> 命令时，<code>composer</code> 会与项目中的 <code>composer.json</code> 文件进行合并。如果存在相同配置项，项目中的 <code>composer.json</code> 文件优先级更高。</p>
</li>
</ul>
</li>
<li><p><code>COMPOSER_CACHE_DIR</code></p>
<p>  默认值：</p>
<ul>
<li><p>like unix <code>$COMPOSER_HOME/cache</code></p>
</li>
<li><p>Windows <code>C:\Users\\AppData\Local\Composer</code> 或 <code>%LOCALAPPDATA%/Composer</code></p>
</li>
<li><p>也可以通过 <code>cache-dir</code> 进行配置</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"config"</span>: &#123;</span><br><span class="line">        <span class="attr">"cache-dir"</span>: <span class="string">"D:\\php\\Composer\\cache"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>也可以将上面的上面的 <code>json</code> 文件添加到 <code>$COMPOSER_HOME/config.json</code> 文件中</p>
</blockquote>
</li>
</ul>
</li>
</ul>
<blockquote>
<p><a href="https://getcomposer.org/doc/03-cli.md#environment-variables" target="_blank" rel="noopener">更多环境变量</a></p>
</blockquote>
<h2 id="composer-json-字段解释"><a href="#composer-json-字段解释" class="headerlink" title="composer.json 字段解释"></a>composer.json 字段解释</h2><p>以<code>laravel</code> 项目的<code>composer.json</code>文件为例</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"name"</span>: <span class="string">"laravel/laravel"</span>, <span class="comment">//包的名称，它包括供应商名称和项目名称，使用 / 分隔</span></span><br><span class="line">    <span class="attr">"type"</span>: <span class="string">"project"</span>,<span class="comment">//安装类型</span></span><br><span class="line">    <span class="attr">"description"</span>: <span class="string">"The Laravel Framework."</span>,<span class="comment">//简短描述</span></span><br><span class="line">    <span class="attr">"keywords"</span>: [<span class="comment">//关键词数组</span></span><br><span class="line">        <span class="string">"framework"</span>,</span><br><span class="line">        <span class="string">"laravel"</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">"license"</span>: <span class="string">"MIT"</span>,<span class="comment">//许可协议</span></span><br><span class="line">    <span class="attr">"require"</span>: &#123;</span><br><span class="line">        <span class="attr">"php"</span>: <span class="string">"^7.2.5"</span>,</span><br><span class="line">        <span class="attr">"fideloper/proxy"</span>: <span class="string">"^4.2"</span>,</span><br><span class="line">        <span class="attr">"fruitcake/laravel-cors"</span>: <span class="string">"^1.0"</span>,</span><br><span class="line">        <span class="attr">"guzzlehttp/guzzle"</span>: <span class="string">"^6.3"</span>,</span><br><span class="line">        <span class="attr">"laravel/framework"</span>: <span class="string">"^7.0"</span>,</span><br><span class="line">        <span class="attr">"laravel/tinker"</span>: <span class="string">"^2.0"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"require-dev"</span>: &#123;</span><br><span class="line">        <span class="attr">"facade/ignition"</span>: <span class="string">"^2.0"</span>,</span><br><span class="line">        <span class="attr">"fzaninotto/faker"</span>: <span class="string">"^1.9.1"</span>,</span><br><span class="line">        <span class="attr">"mockery/mockery"</span>: <span class="string">"^1.3.1"</span>,</span><br><span class="line">        <span class="attr">"nunomaduro/collision"</span>: <span class="string">"^4.1"</span>,</span><br><span class="line">        <span class="attr">"phpunit/phpunit"</span>: <span class="string">"^8.5"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"config"</span>: &#123;</span><br><span class="line">        <span class="attr">"optimize-autoloader"</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">"preferred-install"</span>: <span class="string">"dist"</span>,</span><br><span class="line">        <span class="attr">"sort-packages"</span>: <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"extra"</span>: &#123;</span><br><span class="line">        <span class="attr">"laravel"</span>: &#123;</span><br><span class="line">            <span class="attr">"dont-discover"</span>: []</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"autoload"</span>: &#123;</span><br><span class="line">        <span class="attr">"psr-4"</span>: &#123;</span><br><span class="line">            <span class="attr">"App\\"</span>: <span class="string">"app/"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"classmap"</span>: [</span><br><span class="line">            <span class="string">"database/seeds"</span>,</span><br><span class="line">            <span class="string">"database/factories"</span></span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"autoload-dev"</span>: &#123;</span><br><span class="line">        <span class="attr">"psr-4"</span>: &#123;</span><br><span class="line">            <span class="attr">"Tests\\"</span>: <span class="string">"tests/"</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"minimum-stability"</span>: <span class="string">"dev"</span>,</span><br><span class="line">    <span class="attr">"prefer-stable"</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">"scripts"</span>: &#123;</span><br><span class="line">        <span class="attr">"post-autoload-dump"</span>: [</span><br><span class="line">            <span class="string">"Illuminate\\Foundation\\ComposerScripts::postAutoloadDump"</span>,</span><br><span class="line">            <span class="string">"@php artisan package:discover --ansi"</span></span><br><span class="line">        ],</span><br><span class="line">        <span class="attr">"post-root-package-install"</span>: [</span><br><span class="line">            <span class="string">"@php -r \"file_exists('.env') || copy('.env.example', '.env');\""</span></span><br><span class="line">        ],</span><br><span class="line">        <span class="attr">"post-create-project-cmd"</span>: [</span><br><span class="line">            <span class="string">"@php artisan key:generate --ansi"</span></span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://loouss.github.io/2020/05/08/composer/" data-id="ckdx01u2j000b38or0cb27i6a" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-SteedPHP" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/05/07/SteedPHP/" class="article-date">
  <time datetime="2020-05-07T23:26:37.000Z" itemprop="datePublished">2020-05-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/05/07/SteedPHP/">SteedPHP</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h2><p>生命周期依赖于swoole 生命周期</p>
<h2 id="服务容器"><a href="#服务容器" class="headerlink" title="服务容器"></a>服务容器</h2><p>对象无状态原则，以单例模式存储对象。</p>
<h5 id="绑定对象"><a href="#绑定对象" class="headerlink" title="绑定对象"></a>绑定对象</h5><ul>
<li>单例绑定</li>
<li>绑定接口到实现</li>
<li>绑定到匿名函数</li>
</ul>
<h5 id="解析对象"><a href="#解析对象" class="headerlink" title="解析对象"></a>解析对象</h5><ul>
<li>单例直接解析一次</li>
</ul>
<h4 id="容器服务实现-PSR-11-接口"><a href="#容器服务实现-PSR-11-接口" class="headerlink" title="容器服务实现 PSR-11 接口"></a>容器服务实现 PSR-11 接口</h4><p> 如果无法解析给定的标识符，则将会引发异常。</p>
<blockquote>
<p> 未绑定标识符时，会抛出 <strong><em>Psr\Container\NotFoundExceptionInterface</em></strong> 异常。</p>
<p> 如果标识符已绑定但无法解析，会抛出 <strong><em>Psr\Container\ContainerExceptionInterface</em></strong> 异常。</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://loouss.github.io/2020/05/07/SteedPHP/" data-id="ckdx01u2f000738or3o6zez4g" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-RabbitMQ极简入门" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/04/25/RabbitMQ%E6%9E%81%E7%AE%80%E5%85%A5%E9%97%A8/" class="article-date">
  <time datetime="2020-04-25T12:34:34.000Z" itemprop="datePublished">2020-04-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/04/25/RabbitMQ%E6%9E%81%E7%AE%80%E5%85%A5%E9%97%A8/">RabbitMQ极简入门</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="单机部署"><a href="#单机部署" class="headerlink" title="单机部署"></a>单机部署</h2><h4 id="安装docker"><a href="#安装docker" class="headerlink" title="安装docker"></a>安装docker</h4><ul>
<li><a href="https://loouss.gitee.io/2018/06/05/%E5%9C%A8linux%E4%B8%AD%E5%AE%89%E8%A3%85docker/" target="_blank" rel="noopener">在linux中安装docker</a></li>
</ul>
<h4 id="docker运行RabbitMQ"><a href="#docker运行RabbitMQ" class="headerlink" title="docker运行RabbitMQ"></a>docker运行RabbitMQ</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo docker run --detach --name rabbitmq --publish 15672:15672 \</span></span><br><span class="line"> --publish 5672:5672 </span><br><span class="line"> --volume /home/vagrant/rabbitmq:/var/lib/rabbitmq \ </span><br><span class="line"> --env RABBITMQ_NODENAME=rabbit@localhost rabbitmq:3.8.3-management-alpine</span><br></pre></td></tr></table></figure>

<ul>
<li><p>查看RabbitMQ运行状态</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo docker <span class="built_in">exec</span> rabbitmq rabbitmqctl status</span></span><br><span class="line"></span><br><span class="line">Status of node rabbit@localhost ...</span><br><span class="line">Runtime</span><br><span class="line"></span><br><span class="line">OS PID: 164</span><br><span class="line">OS: Linux</span><br><span class="line">Uptime (seconds): 41914</span><br><span class="line">RabbitMQ version: 3.8.3</span><br><span class="line">Node name: rabbit@localhost</span><br><span class="line">Erlang configuration: Erlang/OTP 22 [erts-10.7] [source] [64-bit] [smp:2:2] [ds:2:2:10] [async-threads:64]</span><br><span class="line">Erlang processes: 438 used, 1048576 limit</span><br><span class="line">Scheduler run queue: 1</span><br><span class="line">Cluster heartbeat timeout (net_ticktime): 60</span><br><span class="line"></span><br><span class="line">Plugins</span><br><span class="line"></span><br><span class="line">Enabled plugin file: /etc/rabbitmq/enabled_plugins</span><br><span class="line">Enabled plugins:</span><br><span class="line"></span><br><span class="line"> * rabbitmq_management</span><br><span class="line"> * rabbitmq_web_dispatch</span><br><span class="line"> * rabbitmq_management_agent</span><br><span class="line"> * amqp_client</span><br><span class="line"> * cowboy</span><br><span class="line"> * cowlib</span><br><span class="line"></span><br><span class="line">Data directory</span><br><span class="line"></span><br><span class="line">Node data directory: /var/lib/rabbitmq/mnesia/rabbit@localhost</span><br><span class="line"></span><br><span class="line">Config files</span><br><span class="line"></span><br><span class="line"> * /etc/rabbitmq/rabbitmq.conf</span><br><span class="line"></span><br><span class="line">Log file(s)</span><br><span class="line"></span><br><span class="line"> * &lt;stdout&gt;</span><br><span class="line"></span><br><span class="line">Alarms</span><br><span class="line"></span><br><span class="line">(none)</span><br><span class="line"></span><br><span class="line">Memory</span><br><span class="line"></span><br><span class="line">Calculation strategy: rss</span><br><span class="line">Memory high watermark setting: 0.4 of available memory, computed to: 0.8359 gb</span><br><span class="line">other_proc: 0.035 gb (29.44 %)</span><br><span class="line">code: 0.0302 gb (25.35 %)</span><br><span class="line">other_system: 0.024 gb (20.17 %)</span><br><span class="line">allocated_unused: 0.0195 gb (16.34 %)</span><br><span class="line">plugins: 0.0031 gb (2.57 %)</span><br><span class="line">other_ets: 0.0029 gb (2.41 %)</span><br><span class="line">atom: 0.0015 gb (1.27 %)</span><br><span class="line">binary: 0.0013 gb (1.11 %)</span><br><span class="line">mgmt_db: 0.0011 gb (0.95 %)</span><br><span class="line">metrics: 0.0002 gb (0.18 %)</span><br><span class="line">mnesia: 0.0001 gb (0.07 %)</span><br><span class="line">connection_other: 0.0 gb (0.04 %)</span><br><span class="line">quorum_ets: 0.0 gb (0.04 %)</span><br><span class="line">msg_index: 0.0 gb (0.02 %)</span><br><span class="line">queue_procs: 0.0 gb (0.01 %)</span><br><span class="line">connection_readers: 0.0 gb (0.01 %)</span><br><span class="line">connection_channels: 0.0 gb (0.0 %)</span><br><span class="line">connection_writers: 0.0 gb (0.0 %)</span><br><span class="line">queue_slave_procs: 0.0 gb (0.0 %)</span><br><span class="line">quorum_queue_procs: 0.0 gb (0.0 %)</span><br><span class="line">reserved_unallocated: 0.0 gb (0.0 %)</span><br><span class="line"></span><br><span class="line">File Descriptors</span><br><span class="line"></span><br><span class="line">Total: 3, limit: 1048479</span><br><span class="line">Sockets: 1, limit: 943629</span><br><span class="line"></span><br><span class="line">Free Disk Space</span><br><span class="line"></span><br><span class="line">Low free disk space watermark: 0.05 gb</span><br><span class="line">Free disk space: 47.9716 gb</span><br><span class="line"></span><br><span class="line">Totals</span><br><span class="line"></span><br><span class="line">Connection count: 1</span><br><span class="line">Queue count: 1</span><br><span class="line">Virtual host count: 1</span><br><span class="line"></span><br><span class="line">Listeners</span><br><span class="line"></span><br><span class="line">Interface: [::], port: 25672, protocol: clustering, purpose: inter-node and CLI tool communication</span><br><span class="line">Interface: [::], port: 5672, protocol: amqp, purpose: AMQP 0-9-1 and AMQP 1.0</span><br><span class="line">Interface: [::], port: 15672, protocol: http, purpose: HTTP API</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h4 id="Management-Plugin-插件简单使用"><a href="#Management-Plugin-插件简单使用" class="headerlink" title="Management Plugin 插件简单使用"></a>Management Plugin 插件简单使用</h4><p>使用浏览器，访问 <a href="http://127.0.0.1:15672/" target="_blank" rel="noopener">http://127.0.0.1:15672/</a> 地址，我们就可以看到 RabbitMQ Management 的登陆界面。默认情况下，我们可以使用用户名为 <code>guest</code> ，密码为 <code>guest</code> 进行登陆。</p>
<h5 id="控制面板基本概念"><a href="#控制面板基本概念" class="headerlink" title="控制面板基本概念"></a>控制面板基本概念</h5><ul>
<li>Override：整体概览</li>
<li>Connections：<strong>网络连接</strong>，比如一个 TCP 连接</li>
<li>Channels：<strong>信道</strong>，多路复用连接中的一条独立的双向数据流通道，信道是建立在真实的 TCP 连接内地虚拟连接，AMQP 命令都是通过信道发出去的，不管是发布消息、订阅队列还是接收消息，这些动作都是通过信道完成。因为对于操作系统来说建立和销毁 TCP 都是非常昂贵的开销，所以引入了信道的概念，以复用一条 TCP 连接</li>
<li>Exchanges：<strong>交换器</strong>，用来接收生产者发送的消息并将这些消息路由给服务器中的队列</li>
<li>Queues：<strong>消息队列</strong>，用来保存消息直到发送给消费者。它是消息的容器，也是消息的终点。一个消息可投入一个或多个队列。消息一直在队列里面，等待消费者连接到这个队列将其取走</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">注意：一定记得修改&quot;guest&quot;账号</span><br></pre></td></tr></table></figure>

<h2 id="PHP-简单示例"><a href="#PHP-简单示例" class="headerlink" title="PHP 简单示例"></a>PHP 简单示例</h2><h4 id="composer-引入依赖"><a href="#composer-引入依赖" class="headerlink" title="composer 引入依赖"></a>composer 引入依赖</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">composer require php-amqplib/php-amqplib</span><br></pre></td></tr></table></figure>

<ul>
<li><h2 id="RabbitMQProducer"><a href="#RabbitMQProducer" class="headerlink" title="RabbitMQProducer"></a>RabbitMQProducer</h2></li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">require_once</span> <span class="keyword">__DIR__</span> . <span class="string">'/vendor/autoload.php'</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">PhpAmqpLib</span>\<span class="title">Connection</span>\<span class="title">AMQPStreamConnection</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">PhpAmqpLib</span>\<span class="title">Message</span>\<span class="title">AMQPMessage</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建连接</span></span><br><span class="line">$connection = <span class="keyword">new</span> AMQPStreamConnection(<span class="string">'localhost'</span>, <span class="number">5672</span>, <span class="string">'guest'</span>, <span class="string">'guest'</span>);</span><br><span class="line"><span class="comment">//创建通道</span></span><br><span class="line">$channel = $connection-&gt;channel();</span><br><span class="line"><span class="comment">//声明队列</span></span><br><span class="line">$channel-&gt;queue_declare(<span class="string">'hello'</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>);</span><br><span class="line"></span><br><span class="line">$msg = <span class="keyword">new</span> AMQPMessage(<span class="string">'Hello World!'</span>);</span><br><span class="line"><span class="comment">//发布消息</span></span><br><span class="line">$channel-&gt;basic_publish($msg, <span class="string">''</span>, <span class="string">'hello'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">" [x] Sent 'Hello World!'\n"</span>;</span><br><span class="line"><span class="comment">//关闭通道</span></span><br><span class="line">$channel-&gt;close();</span><br><span class="line"><span class="comment">//关闭连接</span></span><br><span class="line">$connection-&gt;close();</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>


<ul>
<li><h2 id="RabbitMQConsumer"><a href="#RabbitMQConsumer" class="headerlink" title="RabbitMQConsumer"></a>RabbitMQConsumer</h2></li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">require_once</span> <span class="keyword">__DIR__</span> . <span class="string">'/vendor/autoload.php'</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">PhpAmqpLib</span>\<span class="title">Connection</span>\<span class="title">AMQPStreamConnection</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建连接</span></span><br><span class="line">$connection = <span class="keyword">new</span> AMQPStreamConnection(<span class="string">'localhost'</span>, <span class="number">5672</span>, <span class="string">'guest'</span>, <span class="string">'guest'</span>);</span><br><span class="line"><span class="comment">//创建通道</span></span><br><span class="line">$channel = $connection-&gt;channel();</span><br><span class="line"><span class="comment">//声明队列</span></span><br><span class="line">$channel-&gt;queue_declare(<span class="string">'hello'</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">" [*] Waiting for messages. To exit press CTRL+C\n"</span>;</span><br><span class="line"><span class="comment">//消息回调函数</span></span><br><span class="line">$callback = <span class="function"><span class="keyword">function</span> <span class="params">($msg)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">' [x] Received '</span>, $msg-&gt;body, <span class="string">"\n"</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">$channel-&gt;basic_consume(<span class="string">'hello'</span>, <span class="string">''</span>, <span class="keyword">false</span>, <span class="keyword">true</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, $callback);</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> ($channel-&gt;is_consuming()) &#123;</span><br><span class="line">    $channel-&gt;wait();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$channel-&gt;close();</span><br><span class="line">$connection-&gt;close();</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>创建从大到小，关闭从小到大</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://loouss.github.io/2020/04/25/RabbitMQ%E6%9E%81%E7%AE%80%E5%85%A5%E9%97%A8/" data-id="ckdx01u2e000638orgruk0jfe" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/RabbitMQ/" rel="tag">RabbitMQ</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-docker国内镜像源配置" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/04/09/docker%E5%9B%BD%E5%86%85%E9%95%9C%E5%83%8F%E6%BA%90%E9%85%8D%E7%BD%AE/" class="article-date">
  <time datetime="2020-04-09T14:14:30.000Z" itemprop="datePublished">2020-04-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/04/09/docker%E5%9B%BD%E5%86%85%E9%95%9C%E5%83%8F%E6%BA%90%E9%85%8D%E7%BD%AE/">docker国内镜像源配置</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <ul>
<li><h4 id="linux"><a href="#linux" class="headerlink" title="linux"></a>linux</h4><p>在 Linux 环境下，我们可以通过修改 <code>/etc/docker/daemon.json</code> ( 如果文件不存在，可以直接创建它 ) 这个 Docker 服务的配置文件达到效果。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"registry-mirrors"</span>: [</span><br><span class="line">        <span class="string">"https://registry.docker-cn.com"</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在修改文件之后重启 docker daemon</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl restart docker</span><br></pre></td></tr></table></figure>
<p>重启之后可以通过 docker info 来查看当前镜像列表</p>
</li>
</ul>
<p>​      </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://loouss.github.io/2020/04/09/docker%E5%9B%BD%E5%86%85%E9%95%9C%E5%83%8F%E6%BA%90%E9%85%8D%E7%BD%AE/" data-id="ckdx01u2l000c38or3ma586o3" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/docker/" rel="tag">docker</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-在docker中运行jenkins" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/04/04/%E5%9C%A8docker%E4%B8%AD%E8%BF%90%E8%A1%8Cjenkins/" class="article-date">
  <time datetime="2020-04-04T21:52:43.000Z" itemprop="datePublished">2020-04-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/04/04/%E5%9C%A8docker%E4%B8%AD%E8%BF%90%E8%A1%8Cjenkins/">在docker中运行jenkins</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Jenkins安装"><a href="#Jenkins安装" class="headerlink" title="Jenkins安装"></a>Jenkins安装</h2><ul>
<li>docker</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">docker run \</span><br><span class="line">-u root \</span><br><span class="line">--rm \</span><br><span class="line">-d \</span><br><span class="line">-p 8080:8080 \</span><br><span class="line">-p 50000:50000 \</span><br><span class="line">-v jenkins-data:&#x2F;var&#x2F;jenkins_home \</span><br><span class="line">-v &#x2F;var&#x2F;run&#x2F;docker.sock:&#x2F;var&#x2F;run&#x2F;docker.sock \</span><br><span class="line">jenkinsci&#x2F;blueocean</span><br></pre></td></tr></table></figure>
<blockquote>
<p>eg:</p>
<p>sudo docker run -u root –name jenkins –rm -d -p 8081:8080 -p 127.0.0.1:50000:50000 -v /mnt/jenkins/data:/var/jenkins_home -v /var/run/docker.sock:/var/run/docker.sock -e JAVA_OPTS=-Duser.timezone=Asia/Shanghai jenkinsci/blueocean</p>
</blockquote>
<blockquote>
<p> 安装后安装插件 ， 和更新Jenkins，可以在启动是 添加环境变量设置时区。 具体细节可以看 Dockerfile 文件。<br>安装插件可能会多次连接超时，可以先升级jenkins版本或者更换插件源。<br>container 重启后，maven构建缓存会丢失，Jenkins升级会失效，可以通过外部 war 包挂载进container的方式管理jenkins版本，容器里的所有状态会重置为镜像初始状态。<br>可以将docker.sock 挂载进入container ，jenkins拥有处理docker接口的能力</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://loouss.github.io/2020/04/04/%E5%9C%A8docker%E4%B8%AD%E8%BF%90%E8%A1%8Cjenkins/" data-id="ckdx01u2t000m38orhxjpbo3d" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/jenkins/" rel="tag">jenkins</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-接口定义规范" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/01/14/%E6%8E%A5%E5%8F%A3%E5%AE%9A%E4%B9%89%E8%A7%84%E8%8C%83/" class="article-date">
  <time datetime="2020-01-14T13:51:19.000Z" itemprop="datePublished">2020-01-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/01/14/%E6%8E%A5%E5%8F%A3%E5%AE%9A%E4%B9%89%E8%A7%84%E8%8C%83/">接口定义规范</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="协议"><a href="#协议" class="headerlink" title="协议"></a>协议</h2><p>HTTPS 协议</p>
<h2 id="接口版本"><a href="#接口版本" class="headerlink" title="接口版本"></a>接口版本</h2><p>在header头中添加 “Api-Version” 描述接口版本</p>
<h2 id="路由命名规范"><a href="#路由命名规范" class="headerlink" title="路由命名规范"></a>路由命名规范</h2><table>
<thead>
<tr>
<th align="left">动作</th>
<th align="left">前缀</th>
<th align="left">示例</th>
</tr>
</thead>
<tbody><tr>
<td align="left">获取</td>
<td align="left">get</td>
<td align="left">get{XXX}</td>
</tr>
<tr>
<td align="left">获取列表</td>
<td align="left">get</td>
<td align="left">get{XXX}List</td>
</tr>
<tr>
<td align="left">获取详情</td>
<td align="left">get</td>
<td align="left">get{XXX}Detail</td>
</tr>
<tr>
<td align="left">新增</td>
<td align="left">add</td>
<td align="left">add{XXX}</td>
</tr>
<tr>
<td align="left">修改</td>
<td align="left">update</td>
<td align="left">update{XXX}</td>
</tr>
<tr>
<td align="left">保存</td>
<td align="left">save</td>
<td align="left">save{XXX}</td>
</tr>
<tr>
<td align="left">删除</td>
<td align="left">delete</td>
<td align="left">delete{XXX}</td>
</tr>
<tr>
<td align="left">上传</td>
<td align="left">upload</td>
<td align="left">upload{XXX}</td>
</tr>
<tr>
<td align="left">发送</td>
<td align="left">send</td>
<td align="left">send{XXX}</td>
</tr>
</tbody></table>
<h2 id="请求方式"><a href="#请求方式" class="headerlink" title="请求方式"></a>请求方式</h2><table>
<thead>
<tr>
<th align="left">请求方式</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">GET</td>
<td align="left">从服务器取出资源</td>
</tr>
<tr>
<td align="left">POST</td>
<td align="left">在服务器新建一个资源</td>
</tr>
<tr>
<td align="left">PUT</td>
<td align="left">在服务器更新资源</td>
</tr>
<tr>
<td align="left">DELETE</td>
<td align="left">从服务器删除资源</td>
</tr>
</tbody></table>
<h2 id="请求参数"><a href="#请求参数" class="headerlink" title="请求参数"></a>请求参数</h2><h4 id="Header"><a href="#Header" class="headerlink" title="Header"></a>Header</h4><p>请求头，存放公共参数、requestId、token、加密字段等。</p>
<h4 id="Body"><a href="#Body" class="headerlink" title="Body"></a>Body</h4><p>Body 体，存放请求接口的参数数据。</p>
<h4 id="公共参数"><a href="#公共参数" class="headerlink" title="公共参数"></a>公共参数</h4><p><strong>WEB 端请求</strong></p>
<table>
<thead>
<tr>
<th align="left">参数</th>
<th align="left">说明</th>
<th align="left">备注</th>
</tr>
</thead>
<tbody><tr>
<td align="left">token</td>
<td align="left">授权token</td>
<td align="left">字符串</td>
</tr>
</tbody></table>
<h4 id="安全规范"><a href="#安全规范" class="headerlink" title="安全规范"></a>安全规范</h4><p><strong>敏感参数加密处理</strong></p>
<p>登录密码、支付密码，需加密后传输，建议使用 <code>非对称加密</code>。</p>
<h4 id="其他规范"><a href="#其他规范" class="headerlink" title="其他规范"></a>其他规范</h4><ul>
<li><strong>参数命名规范</strong> 建议使用驼峰命名，首字母小写。</li>
<li><strong>requestId</strong> 建议携带唯一标示追踪问题。</li>
</ul>
<h2 id="返回参数"><a href="#返回参数" class="headerlink" title="返回参数"></a>返回参数</h2><table>
<thead>
<tr>
<th align="left">参数</th>
<th align="left">类型</th>
<th align="left">说明</th>
<th align="left">备注</th>
</tr>
</thead>
<tbody><tr>
<td align="left">code</td>
<td align="left">Number</td>
<td align="left">结果码</td>
<td align="left">成功=1 失败=0</td>
</tr>
<tr>
<td align="left">message</td>
<td align="left">String</td>
<td align="left">显示信息</td>
<td align="left">系统繁忙，稍后重试</td>
</tr>
<tr>
<td align="left">error</td>
<td align="left">String</td>
<td align="left">错误信息</td>
<td align="left">便于研发定位问题</td>
</tr>
<tr>
<td align="left">data</td>
<td align="left">Object</td>
<td align="left">数据</td>
<td align="left">JSON 格式</td>
</tr>
</tbody></table>
<p><strong>若有分页数据返回的，格式如下</strong>：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	<span class="attr">"code"</span>: <span class="number">1</span>,</span><br><span class="line">	<span class="attr">"message"</span>: <span class="string">"ok"</span>,</span><br><span class="line">	<span class="attr">"error"</span>: <span class="string">""</span>,</span><br><span class="line">	<span class="attr">"data"</span>: &#123;</span><br><span class="line">		<span class="attr">"list"</span>: [],</span><br><span class="line">		<span class="attr">"pagination"</span>: &#123;</span><br><span class="line">			<span class="attr">"total"</span>: <span class="number">100</span>,</span><br><span class="line">			<span class="attr">"currentPage"</span>: <span class="number">1</span>,</span><br><span class="line">			<span class="attr">"totalPages"</span>: <span class="number">10</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<div style='display: none'>

<h4 id="安全规范-1"><a href="#安全规范-1" class="headerlink" title="安全规范"></a>安全规范</h4><p><strong>敏感数据脱敏处理</strong></p>
<p>用户手机号、用户邮箱、身份证号、支付账号、邮寄地址等要进行脱敏，部分数据加 * 号处理。</p>
<h4 id="其他规范-1"><a href="#其他规范-1" class="headerlink" title="其他规范"></a>其他规范</h4><ul>
<li>属性名命名时，建议使用驼峰命名，首字母小写。</li>
<li>属性值为空时，严格按类型返回默认值。</li>
<li>金额类型/时间日期类型的属性值，如果仅用来显示，建议后端返回可以显示的字符串。</li>
<li>业务逻辑的状态码和对应的文案，建议后端两者都返回。</li>
<li>调用方不需要的属性，不要返回。</li>
</ul>
</div>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://loouss.github.io/2020/01/14/%E6%8E%A5%E5%8F%A3%E5%AE%9A%E4%B9%89%E8%A7%84%E8%8C%83/" data-id="ckdx01u2x000r38or9sa87et2" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-在linux中安装docker" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/06/05/%E5%9C%A8linux%E4%B8%AD%E5%AE%89%E8%A3%85docker/" class="article-date">
  <time datetime="2018-06-05T11:06:40.000Z" itemprop="datePublished">2018-06-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/06/05/%E5%9C%A8linux%E4%B8%AD%E5%AE%89%E8%A3%85docker/">在linux中安装docker</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="安装docker"><a href="#安装docker" class="headerlink" title="安装docker"></a>安装docker</h2><ul>
<li><h4 id="CentOS"><a href="#CentOS" class="headerlink" title="CentOS"></a>CentOS</h4> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo yum install yum-utils device-mapper-persistent-data lvm2</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo yum install docker-ce</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo systemctl <span class="built_in">enable</span> docker</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo systemctl start docker</span></span><br></pre></td></tr></table></figure>
</li>
<li><h4 id="Debian"><a href="#Debian" class="headerlink" title="Debian"></a>Debian</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo apt-get install apt-transport-https ca-certificates curl gnupg2 software-properties-common</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> curl -fsSL https://download.docker.com/linux/debian/gpg | sudo apt-key add -</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo add-apt-repository <span class="string">"deb [arch=amd64] https://download.docker.com/linux/debian <span class="variable">$(lsb_release -cs)</span> stable"</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo apt-get update</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo apt-get install docker-ce</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo systemctl <span class="built_in">enable</span> docker</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo systemctl start docker</span></span><br></pre></td></tr></table></figure>
</li>
<li><h4 id="Fedora"><a href="#Fedora" class="headerlink" title="Fedora"></a>Fedora</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo dnf -y install dnf-plugins-core</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo dnf config-manager --add-repo https://download.docker.com/linux/fedora/docker-ce.repo</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo dnf install docker-ce</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo systemctl <span class="built_in">enable</span> docker</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo systemctl start docker</span></span><br></pre></td></tr></table></figure></li>
<li><h4 id="Ubuntu"><a href="#Ubuntu" class="headerlink" title="Ubuntu"></a>Ubuntu</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo apt-get install apt-transport-https ca-certificates curl software-properties-common</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo add-apt-repository <span class="string">"deb [arch=amd64] https://download.docker.com/linux/ubuntu <span class="variable">$(lsb_release -cs)</span> stable"</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo apt-get update</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo apt-get install docker-ce</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo systemctl <span class="built_in">enable</span> docker</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo systemctl start docker</span></span><br></pre></td></tr></table></figure>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://loouss.github.io/2018/06/05/%E5%9C%A8linux%E4%B8%AD%E5%AE%89%E8%A3%85docker/" data-id="ckdx01u2u000n38orh5icbnj7" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/docker/" rel="tag">docker</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/">&amp;laquo; Prev</a><a class="page-number" href="/">1</a><span class="page-number current">2</span>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/RabbitMQ/" rel="tag">RabbitMQ</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/" rel="tag">docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/" rel="tag">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jenkins/" rel="tag">jenkins</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/" rel="tag">mysql</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/RabbitMQ/" style="font-size: 10px;">RabbitMQ</a> <a href="/tags/docker/" style="font-size: 20px;">docker</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/jenkins/" style="font-size: 10px;">jenkins</a> <a href="/tags/mysql/" style="font-size: 10px;">mysql</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/08/16/%E5%AF%B9%E5%9B%BE%E7%89%87%E6%8C%89%E6%8B%8D%E6%92%92%E8%AE%BE%E5%A4%87%E5%92%8C%E6%97%B6%E9%97%B4%E5%88%86%E7%BB%84/">对图片按拍撒设备和时间分组</a>
          </li>
        
          <li>
            <a href="/2020/08/16/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2020/08/10/docker%E8%BF%90%E8%A1%8Cyapi/">docker运行yapi</a>
          </li>
        
          <li>
            <a href="/2020/08/09/docker%E8%BF%90%E8%A1%8Cgitlab/">docker运行gitlab</a>
          </li>
        
          <li>
            <a href="/2020/08/04/alpine%E9%95%9C%E5%83%8Fapk%E6%BA%90%E4%BF%AE%E6%94%B9/">alpine镜像apk源修改</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 Loouss<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>