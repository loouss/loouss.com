<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Loouss</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Loouss">
<meta property="og:url" content="https://loouss.github.io/index.html">
<meta property="og:site_name" content="Loouss">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Loouss">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Loouss" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 4.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Loouss</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://loouss.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-对图片按拍撒设备和时间分组" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/08/16/%E5%AF%B9%E5%9B%BE%E7%89%87%E6%8C%89%E6%8B%8D%E6%92%92%E8%AE%BE%E5%A4%87%E5%92%8C%E6%97%B6%E9%97%B4%E5%88%86%E7%BB%84/" class="article-date">
  <time datetime="2020-08-16T14:51:11.000Z" itemprop="datePublished">2020-08-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/08/16/%E5%AF%B9%E5%9B%BE%E7%89%87%E6%8C%89%E6%8B%8D%E6%92%92%E8%AE%BE%E5%A4%87%E5%92%8C%E6%97%B6%E9%97%B4%E5%88%86%E7%BB%84/">对图片按拍撒设备和时间分组</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">error_reporting(E_ERROR);</span><br><span class="line">date_default_timezone_set(<span class="string">'PRC'</span>);</span><br><span class="line"><span class="keyword">echo</span> date(<span class="string">'Y-m-d H:i:s'</span>) . PHP_EOL;</span><br><span class="line"></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">AbstractImagesGroup</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="function"><span class="keyword">function</span> <span class="title">imagesGroup</span><span class="params">($sourPath, $destPath)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;treeDir($sourPath);</span><br><span class="line">        <span class="keyword">$this</span>-&gt;readExif();</span><br><span class="line">        <span class="keyword">$this</span>-&gt;copyFile($destPath);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="function"><span class="keyword">function</span> <span class="title">treeDir</span><span class="params">($sourPath)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="function"><span class="keyword">function</span> <span class="title">readExif</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="function"><span class="keyword">function</span> <span class="title">copyFile</span><span class="params">($destPath)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">JpgGroup</span> <span class="keyword">extends</span> <span class="title">AbstractImagesGroup</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> $arrFile = [];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> $fileGroup = [];</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="function"><span class="keyword">function</span> <span class="title">treeDir</span><span class="params">($sourPath)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        $result = [];</span><br><span class="line">        $myDir = dir($sourPath);</span><br><span class="line">        <span class="keyword">while</span> ($file = $myDir-&gt;read()) &#123;</span><br><span class="line">            <span class="keyword">if</span> ((is_dir($sourPath . DIRECTORY_SEPARATOR . $file))</span><br><span class="line">                <span class="keyword">and</span> ($file != <span class="string">"."</span>) <span class="keyword">and</span> ($file != <span class="string">".."</span>) <span class="keyword">and</span> ($file != <span class="string">".idea"</span>)) &#123;</span><br><span class="line"></span><br><span class="line">                $result[$sourPath . DIRECTORY_SEPARATOR . $file] =</span><br><span class="line">                    <span class="keyword">$this</span>-&gt;treeDir($sourPath . DIRECTORY_SEPARATOR . $file);</span><br><span class="line"></span><br><span class="line">            &#125; <span class="keyword">elseif</span> (($file != <span class="string">"."</span>) <span class="keyword">and</span> ($file != <span class="string">".."</span>) <span class="keyword">and</span> ($file != <span class="string">".idea"</span>)) &#123;</span><br><span class="line">                $result[] = $sourPath . DIRECTORY_SEPARATOR . $file;</span><br><span class="line">                <span class="keyword">$this</span>-&gt;arrFile[] = $sourPath . DIRECTORY_SEPARATOR . $file;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        $myDir-&gt;close();</span><br><span class="line">        <span class="keyword">return</span> $result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="function"><span class="keyword">function</span> <span class="title">readExif</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">foreach</span> (<span class="keyword">$this</span>-&gt;arrFile <span class="keyword">as</span> $value) &#123;</span><br><span class="line">            <span class="keyword">if</span> (($exif = exif_read_data($value)) !== <span class="keyword">false</span>) &#123;</span><br><span class="line"></span><br><span class="line">                $date = <span class="string">'000000'</span>;</span><br><span class="line">                <span class="keyword">if</span> ($exif[<span class="string">'DateTime'</span>]) &#123;</span><br><span class="line">                    $date = date(<span class="string">'Ym'</span>, strtotime($exif[<span class="string">'DateTime'</span>]));</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                $make = <span class="string">'Other'</span>;</span><br><span class="line">                <span class="keyword">if</span> ($exif[<span class="string">'Make'</span>]) &#123;</span><br><span class="line">                    $make = $exif[<span class="string">'Make'</span>];</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">$this</span>-&gt;fileGroup[$make][$date][] = $value;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="function"><span class="keyword">function</span> <span class="title">copyFile</span><span class="params">($destPath)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">foreach</span> (<span class="keyword">$this</span>-&gt;fileGroup <span class="keyword">as</span> $make =&gt; $date) &#123;</span><br><span class="line">            <span class="keyword">foreach</span> ($date <span class="keyword">as</span> $key =&gt; $value) &#123;</span><br><span class="line"></span><br><span class="line">                $path = $destPath . DIRECTORY_SEPARATOR . $make . DIRECTORY_SEPARATOR . $key;</span><br><span class="line"></span><br><span class="line">                is_dir($path) <span class="keyword">or</span> mkdir($path, <span class="number">0777</span>, <span class="keyword">true</span>);</span><br><span class="line"></span><br><span class="line">                <span class="keyword">foreach</span> ($value <span class="keyword">as</span> $item) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (!is_file($item)) &#123;</span><br><span class="line">                        <span class="keyword">continue</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    $destFile = $path . DIRECTORY_SEPARATOR . basename($item);</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">if</span> (copy($item, $destFile)) &#123;</span><br><span class="line">                        <span class="keyword">echo</span> $item . <span class="string">' group success'</span> . PHP_EOL;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//照片所在的文件夹</span></span><br><span class="line">$sourPath = <span class="string">'C:\\Users\\loous\\Desktop\\test'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//分组后照片存储路径</span></span><br><span class="line">$destPath = <span class="keyword">__DIR__</span> . DIRECTORY_SEPARATOR . <span class="string">'imagesGroup'</span>;</span><br><span class="line"></span><br><span class="line">$file = <span class="keyword">new</span> JpgGroup();</span><br><span class="line"></span><br><span class="line">$file-&gt;imagesGroup($sourPath, $destPath);</span><br></pre></td></tr></table></figure>


<p>修改文件中变量 <strong>$sourPath</strong>，照片所在文件目录，可以递归读取照片文件。<br>将分组完成的照片复制到 <strong>$destPath</strong>，不会改变原文件</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://loouss.github.io/2020/08/16/%E5%AF%B9%E5%9B%BE%E7%89%87%E6%8C%89%E6%8B%8D%E6%92%92%E8%AE%BE%E5%A4%87%E5%92%8C%E6%97%B6%E9%97%B4%E5%88%86%E7%BB%84/" data-id="ckdx01u2v000o38or5zm8ejl2" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-hello-world" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/08/16/hello-world/" class="article-date">
  <time datetime="2020-08-16T11:21:47.276Z" itemprop="datePublished">2020-08-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/08/16/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/one-command-deployment.html" target="_blank" rel="noopener">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://loouss.github.io/2020/08/16/hello-world/" data-id="ckdx01u2o000h38or37ho6517" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-docker运行yapi" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/08/10/docker%E8%BF%90%E8%A1%8Cyapi/" class="article-date">
  <time datetime="2020-08-10T14:13:44.000Z" itemprop="datePublished">2020-08-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/08/10/docker%E8%BF%90%E8%A1%8Cyapi/">docker运行yapi</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="首先启动mongo"><a href="#首先启动mongo" class="headerlink" title="首先启动mongo"></a>首先启动mongo</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker run --detach --restart  always --name mongo-yapi --volume /mnt/mongo/data/db:/data/db mongo</span><br></pre></td></tr></table></figure>

<blockquote>
<p>yapi数据存储在mongo数据库中<br>–volume 路径根据自己实际情况填写</p>
</blockquote>
<h1 id="初始化yapi及查看密码"><a href="#初始化yapi及查看密码" class="headerlink" title="初始化yapi及查看密码"></a>初始化yapi及查看密码</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker run -it --rm --link mongo-yapi:mongo --entrypoint npm --workdir /api/vendors registry.cn-hangzhou.aliyuncs.com/anoy/yapi run install-server</span><br></pre></td></tr></table></figure>

<h1 id="启动yapi"><a href="#启动yapi" class="headerlink" title="启动yapi"></a>启动yapi</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker run --detach --restart  always --name yapi --link mongo-yapi:mongo --workdir /api/vendors --publish 127.0.0.1:3000:3000 registry.cn-hangzhou.aliyuncs.com/anoy/yapi server/app.js</span><br></pre></td></tr></table></figure>





      
    </div>
    <footer class="article-footer">
      <a data-url="https://loouss.github.io/2020/08/10/docker%E8%BF%90%E8%A1%8Cyapi/" data-id="ckdx01u2n000g38orfwo54lpw" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-docker运行gitlab" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/08/09/docker%E8%BF%90%E8%A1%8Cgitlab/" class="article-date">
  <time datetime="2020-08-09T22:25:10.000Z" itemprop="datePublished">2020-08-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/08/09/docker%E8%BF%90%E8%A1%8Cgitlab/">docker运行gitlab</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --detach --restart always --hostname gitlab.xx.xx --publish 127.0.0.1:8080:80 --publish 0.0.0.0:22:22 --name gitlab --volume /application/gitlab/logs:/var/log/gitlab --volume /application/gitlab/data:/var/opt/gitlab --volume /application/gitlab/config:/etc/gitlab gitlab/gitlab-ce</span><br></pre></td></tr></table></figure>

<blockquote>
<p>如果存在版本升级情况，请按照<a href="https://docs.gitlab.com/ee/policy/maintenance.html#upgrading-major-versions" target="_blank" rel="noopener">升级路径</a>升级</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen       443 ssl http2;</span><br><span class="line">    listen       [::]:443 ssl http2;</span><br><span class="line">    server_name  xxx.xx.xx;</span><br><span class="line"></span><br><span class="line">    ssl_certificate &quot;&#x2F;application&#x2F;ssl&#x2F;xxx.xx.xx&#x2F;xxx.pem&quot;;</span><br><span class="line">    ssl_certificate_key &quot;&#x2F;application&#x2F;ssl&#x2F;xxx.xx.xx&#x2F;xxx.key&quot;;</span><br><span class="line"></span><br><span class="line">    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;</span><br><span class="line">    ssl_ciphers ALL:!ADH:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP;</span><br><span class="line">    ssl_prefer_server_ciphers on;</span><br><span class="line">    ssl_session_timeout  10m;</span><br><span class="line"></span><br><span class="line">    location &#x2F; &#123;</span><br><span class="line">        proxy_pass http:&#x2F;&#x2F;127.0.0.1:8080;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://loouss.github.io/2020/08/09/docker%E8%BF%90%E8%A1%8Cgitlab/" data-id="ckdx01u2m000e38or1dcbault" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-alpine镜像apk源修改" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/08/04/alpine%E9%95%9C%E5%83%8Fapk%E6%BA%90%E4%BF%AE%E6%94%B9/" class="article-date">
  <time datetime="2020-08-04T23:25:11.000Z" itemprop="datePublished">2020-08-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/08/04/alpine%E9%95%9C%E5%83%8Fapk%E6%BA%90%E4%BF%AE%E6%94%B9/">alpine镜像apk源修改</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>alpine 原生apk源网络原因，国内访问延迟较高，可以替换为阿里云镜像</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RUN sed -i 's/dl-cdn.alpinelinux.org/mirrors.aliyun.com/g' /etc/apk/repositories</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://loouss.github.io/2020/08/04/alpine%E9%95%9C%E5%83%8Fapk%E6%BA%90%E4%BF%AE%E6%94%B9/" data-id="ckdx01u2i000a38or65oa3yoo" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Jenkins简单示例" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/08/03/Jenkins%E7%AE%80%E5%8D%95%E7%A4%BA%E4%BE%8B/" class="article-date">
  <time datetime="2020-08-03T22:07:24.000Z" itemprop="datePublished">2020-08-03</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/08/03/Jenkins%E7%AE%80%E5%8D%95%E7%A4%BA%E4%BE%8B/">Jenkins简单示例</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Java-项目"><a href="#Java-项目" class="headerlink" title="Java 项目"></a>Java 项目</h1><p>新建任务时项目类型选择 <strong><em>构建一个maven项目</em></strong> </p>
<p><img src="https://loouss-1252083494.cos.ap-chongqing.myqcloud.com/blog/jenkins4.png" alt=""></p>
<h2 id="构建项目配置"><a href="#构建项目配置" class="headerlink" title="构建项目配置"></a>构建项目配置</h2><ul>
<li><p><strong>General 部分</strong></p>
<p>填写项目信息，设置构建参数等</p>
</li>
<li><p><strong>源码管理</strong></p>
<p>可以选择 <strong><em>git</em></strong>,<strong><em>svn</em></strong></p>
<ul>
<li><p>git 填入仓库地址及访问密钥（Credentials），指定分支（branch）</p>
<p><img src="https://loouss-1252083494.cos.ap-chongqing.myqcloud.com/blog/jenkins1.png" alt=""></p>
</li>
</ul>
</li>
<li><p><strong>构建触发器</strong></p>
<p>可以用git push event触发Jenkins构建，或者定时器构建等</p>
<p><img src="https://loouss-1252083494.cos.ap-chongqing.myqcloud.com/blog/jenkins2.png" alt=""></p>
</li>
<li><p><strong>构建环境</strong></p>
<p>没有特殊需求可以不用理会</p>
</li>
<li><p><strong>Pre Steps</strong> </p>
<p>构建前操作，可以执行shell脚本等根据实际情况处理</p>
</li>
<li><p><strong>Build</strong></p>
<p>pom.xml文件路径</p>
</li>
<li><p><strong>Post Steps</strong></p>
<p>构建完成时操作</p>
<blockquote>
<p>触发前置条件：Run only if build succeeds , Run only if build succeeds or is unstable , Run regardless of build result</p>
<p>如果需要push docker image，可以见选择 <strong><em>Run only if build succeeds</em></strong> 只在构建成功时执行shell完成镜像push</p>
</blockquote>
<p>示例shell</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">REGISTRY="ccr.ccs.tencentyun.com/loouss/xxxx"</span><br><span class="line">docker build -t $REGISTRY:$GIT_COMMIT .</span><br><span class="line">docker push $REGISTRY:$GIT_COMMIT</span><br><span class="line">docker rmi $REGISTRY:$GIT_COMMIT</span><br></pre></td></tr></table></figure>



</li>
</ul>
<h1 id="PHP项目"><a href="#PHP项目" class="headerlink" title="PHP项目"></a>PHP项目</h1><p>新建任务时项目类型选择 <strong><em>构建一个自由风格的软件项目</em></strong></p>
<p><img src="https://loouss-1252083494.cos.ap-chongqing.myqcloud.com/blog/jenkins5.png" alt=""></p>
<h2 id="构建项目配置-1"><a href="#构建项目配置-1" class="headerlink" title="构建项目配置"></a>构建项目配置</h2><ul>
<li><p><strong>General</strong></p>
<p>与java项目同理</p>
</li>
<li><p><strong>源码管理</strong></p>
<p>与java项目同理</p>
</li>
<li><p><strong>构建触发器</strong></p>
<p>与java项目同理</p>
</li>
<li><p><strong>构建环境</strong></p>
<p>与java项目同理</p>
</li>
<li><p><strong>构建</strong></p>
<p>构建步骤可以根据实际项目选择，简单示例可以如下</p>
<p><img src="https://loouss-1252083494.cos.ap-chongqing.myqcloud.com/blog/jenkins6.png" alt=""></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">REGISTRY="ccr.ccs.tencentyun.com/loouss/xxxx"</span><br><span class="line">docker build -t $REGISTRY:$GIT_COMMIT .</span><br><span class="line">docker push $REGISTRY:$GIT_COMMIT</span><br><span class="line">docker rmi $REGISTRY:$GIT_COMMIT</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>构建后操作</strong></p>
<p>可以根据实际情况选择执行</p>
<p><img src="https://loouss-1252083494.cos.ap-chongqing.myqcloud.com/blog/jenkins7.png" alt=""></p>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://loouss.github.io/2020/08/03/Jenkins%E7%AE%80%E5%8D%95%E7%A4%BA%E4%BE%8B/" data-id="ckdx01u29000238or5fbvgfy9" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-PSR-15" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/07/19/PSR-15/" class="article-date">
  <time datetime="2020-07-19T15:20:26.000Z" itemprop="datePublished">2020-07-19</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/07/19/PSR-15/">PSR-15</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="PSR-15-HTTP请求处理器"><a href="#PSR-15-HTTP请求处理器" class="headerlink" title="PSR 15     HTTP请求处理器"></a>PSR 15     HTTP请求处理器</h1><h3 id="主要接口"><a href="#主要接口" class="headerlink" title="主要接口"></a>主要接口</h3><ul>
<li><p>RequestHandlerInterface 请求处理器</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">Psr</span>\<span class="title">Http</span>\<span class="title">Server</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">Psr</span>\<span class="title">Http</span>\<span class="title">Message</span>\<span class="title">ResponseInterface</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Psr</span>\<span class="title">Http</span>\<span class="title">Message</span>\<span class="title">ServerRequestInterface</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 处理服务器请求并返回响应</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * HTTP 请求处理程序处理 HTTP 请求，以便生成 HTTP 相应。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">RequestHandlerInterface</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 处理服务器请求并返回响应</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * 可以调用其他协助代码来生成响应。</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">handle</span><span class="params">(ServerRequestInterface $request)</span>: <span class="title">ResponseInterface</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>MiddlewareInterface  中间件</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">Psr</span>\<span class="title">Http</span>\<span class="title">Server</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">Psr</span>\<span class="title">Http</span>\<span class="title">Message</span>\<span class="title">ResponseInterface</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Psr</span>\<span class="title">Http</span>\<span class="title">Message</span>\<span class="title">ServerRequestInterface</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 参与处理服务器的请求与响应</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 一个 HTTP 中间件组件参与处理一个 HTTP 的消息:</span></span><br><span class="line"><span class="comment"> * 通过对请求进行操作, 生成相应,或者将请求转发给后续的中间件，并  且可能对它的响应进行操作</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">MiddlewareInterface</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 处理一个传入的请求</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * 处理传入的服务器请求以产生相应.</span></span><br><span class="line"><span class="comment">     * 如果无法生成响应本身，它可能会委托给提供的请求处理程序来执行此操作</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">process</span><span class="params">(ServerRequestInterface $request, RequestHandlerInterface $handler)</span>: <span class="title">ResponseInterface</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


</li>
</ul>
<h3 id="简单实现示例（伪代码）"><a href="#简单实现示例（伪代码）" class="headerlink" title="简单实现示例（伪代码）"></a>简单实现示例（伪代码）</h3><ul>
<li><p>RequestHandlerInterface 请求处理器</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HttpRequestHandler</span> <span class="keyword">implements</span> <span class="title">RequestHandlerInterface</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">protected</span> $middlewares = [];</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">protected</span> $offset = <span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">handle</span><span class="params">(ServerRequestInterface $request)</span>: <span class="title">ResponseInterface</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        $middleware = <span class="keyword">$this</span>-&gt;middlewares[<span class="keyword">$this</span>-&gt;offset];</span><br><span class="line">        <span class="keyword">return</span> $middleware-&gt;process($request, <span class="keyword">$this</span>-&gt;next());</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">protected</span> <span class="function"><span class="keyword">function</span> <span class="title">next</span><span class="params">()</span>: <span class="title">self</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        ++<span class="keyword">$this</span>-&gt;offset;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>MiddlewareInterface  中间件</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FormatMiddleware</span> <span class="keyword">implements</span> <span class="title">MiddlewareInterface</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">process</span><span class="params">(ServerRequestInterface $request, RequestHandlerInterface $handler)</span>: <span class="title">ResponseInterface</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> $handler-&gt;handle($request);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>请求处理器与中间互相调用，直至在中间件中返回 <strong><em>ResponseInterface</em></strong> 实例。</p>
</blockquote>
</li>
</ul>
<p><img src="https://loouss-1252083494.cos.ap-chongqing.myqcloud.com/blog/psr15.jpg" alt=""></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://loouss.github.io/2020/07/19/PSR-15/" data-id="ckdx01u2c000538orb02ue2zx" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Git仓库完整迁移" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/05/15/Git%E4%BB%93%E5%BA%93%E5%AE%8C%E6%95%B4%E8%BF%81%E7%A7%BB/" class="article-date">
  <time datetime="2020-05-15T14:41:37.000Z" itemprop="datePublished">2020-05-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/05/15/Git%E4%BB%93%E5%BA%93%E5%AE%8C%E6%95%B4%E8%BF%81%E7%A7%BB/">Git仓库完整迁移</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Git仓库完成迁移"><a href="#Git仓库完成迁移" class="headerlink" title="Git仓库完成迁移"></a>Git仓库完成迁移</h1><p>完整迁移：迁移仓库内所有commit</p>
<ol>
<li><p>将git仓库<code>clone</code>到本地</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">git clone --bare https://xxx.xxx.git</span><br></pre></td></tr></table></figure>
</li>
<li><p>进入仓库文件夹<code>push</code>到新的仓库地址</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">git push --mirror https://xxx.xxx.git</span><br></pre></td></tr></table></figure>

</li>
</ol>
<blockquote>
<p>仓库地址为自己项目中实际地址</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://loouss.github.io/2020/05/15/Git%E4%BB%93%E5%BA%93%E5%AE%8C%E6%95%B4%E8%BF%81%E7%A7%BB/" data-id="ckdx01u1t000038or1jpidy9r" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/git/" rel="tag">git</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-mysql-join" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/05/14/mysql-join/" class="article-date">
  <time datetime="2020-05-14T11:31:53.000Z" itemprop="datePublished">2020-05-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/05/14/mysql-join/">mysql-join</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="连接简介"><a href="#连接简介" class="headerlink" title="连接简介"></a>连接简介</h2><h6 id="准备两张表-t1-t2"><a href="#准备两张表-t1-t2" class="headerlink" title="准备两张表 t1 t2"></a>准备两张表 <code>t1</code> <code>t2</code></h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> t1 (a1 <span class="built_in">int</span> , b1 <span class="built_in">char</span>(<span class="number">2</span>));</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> t2 (a2 <span class="built_in">int</span> , b2 <span class="built_in">char</span>(<span class="number">2</span>));</span><br></pre></td></tr></table></figure>

<h6 id="插入演示数据"><a href="#插入演示数据" class="headerlink" title="插入演示数据"></a>插入演示数据</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t1 <span class="keyword">VALUES</span> (<span class="number">1</span>,<span class="string">'aa'</span>),(<span class="number">2</span>,<span class="string">'bb'</span>),(<span class="number">3</span>,<span class="string">'cc'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> t2 <span class="keyword">VALUES</span> (<span class="number">11</span>,<span class="string">'aa'</span>),(<span class="number">22</span>,<span class="string">'bb'</span>),(<span class="number">23</span>,<span class="string">'cc'</span>);</span><br></pre></td></tr></table></figure>

<p>执行以上步骤我们已经创建表<code>t1</code> <code>t2</code>, 并且已经插入数据。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">mysql&gt; SELECT * FROM t1;</span><br><span class="line">+<span class="comment">----+----+</span></span><br><span class="line">| a1 | b1 |</span><br><span class="line">+<span class="comment">----+----+</span></span><br><span class="line">|  1 | aa |</span><br><span class="line">|  2 | bb |</span><br><span class="line">|  3 | cc |</span><br><span class="line">+<span class="comment">----+----+</span></span><br><span class="line">3 rows in <span class="keyword">set</span> (<span class="number">0.02</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> t2;</span><br><span class="line">+<span class="comment">----+----+</span></span><br><span class="line">| a2 | b2 |</span><br><span class="line">+<span class="comment">----+----+</span></span><br><span class="line">| 11 | aa |</span><br><span class="line">| 22 | bb |</span><br><span class="line">| 23 | cc |</span><br><span class="line">+<span class="comment">----+----+</span></span><br><span class="line">3 rows in <span class="keyword">set</span> (<span class="number">0.03</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt;</span><br></pre></td></tr></table></figure>

<p>连结就是将每个表中的数据取出来一次组合匹配的结果返回给用户。</p>
<p>连结之后的结果就是：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">mysql&gt; SELECT * FROM t1, t2;</span><br><span class="line">+<span class="comment">----+----+----+----+</span></span><br><span class="line">| a1 | b1 | a2 | b2 |</span><br><span class="line">+<span class="comment">----+----+----+----+</span></span><br><span class="line">|  1 | aa | 11 | aa |</span><br><span class="line">|  2 | bb | 11 | aa |</span><br><span class="line">|  3 | cc | 11 | aa |</span><br><span class="line">|  1 | aa | 22 | bb |</span><br><span class="line">|  2 | bb | 22 | bb |</span><br><span class="line">|  3 | cc | 22 | bb |</span><br><span class="line">|  1 | aa | 23 | cc |</span><br><span class="line">|  2 | bb | 23 | cc |</span><br><span class="line">|  3 | cc | 23 | cc |</span><br><span class="line">+<span class="comment">----+----+----+----+</span></span><br><span class="line">9 rows in <span class="keyword">set</span> (<span class="number">0.04</span> sec)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>笛卡尔积<br>如果我们连结多张表操作，没有限制条件的话，产生的笛卡尔积可能会非常巨大（t1_data_line * t2_data_line * …）</p>
</blockquote>
<h6 id="连接过程"><a href="#连接过程" class="headerlink" title="连接过程"></a>连接过程</h6><ol>
<li>第一步：第一个需要查询的表称为<code>驱动表</code>，在 <code>SELECT * FROM t1, t2;</code> 中<code>t1</code> 是驱动表</li>
<li>第二步：对于上一步从<code>驱动表</code>中产生的结果集，分别需要到<code>t2</code>表中查询记录，因为是根据<code>t1</code>表中的结果去查询<code>t2</code>，所以<code>t2</code>也称为<code>被驱动表</code>。</li>
</ol>
<blockquote>
<p>被驱动表可能会被访问多次，应避免大量数据带来io性能差，以及避免全表扫描。</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://loouss.github.io/2020/05/14/mysql-join/" data-id="ckdx01u2p000i38oret8haw77" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mysql/" rel="tag">mysql</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-vagrant" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/05/12/vagrant/" class="article-date">
  <time datetime="2020-05-12T10:00:06.000Z" itemprop="datePublished">2020-05-12</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/05/12/vagrant/">vagrant</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><ul>
<li><p>虚拟化平台</p>
<p>  在安装 vagrant 之前需要先安装虚拟化平台，vmware（收费） 或者 virtualBox（免费）。</p>
<ul>
<li><p>安装 vmware <a href="https://www.vmware.com/" target="_blank" rel="noopener">官网</a> 下载 .exe 安装包安装vmware。</p>
</li>
<li><p>安装 virtualBox <a href="https://www.virtualbox.org/" target="_blank" rel="noopener">官网</a> 下载 .exe 安装包安装virtualBox。</p>
<blockquote>
<p>vmware 与 virtualBox 可以任意选择一个</p>
</blockquote>
</li>
</ul>
</li>
<li><p>Vagrant</p>
<p>  下载vagrant <a href="https://www.vagrantup.com/downloads.html" target="_blank" rel="noopener">下载</a> 下载对应的系统及系统位数。</p>
<blockquote>
<p>安装完成后添加box注意选择对应的虚拟化平台</p>
</blockquote>
</li>
</ul>
<h2 id="vagrant-常用命令"><a href="#vagrant-常用命令" class="headerlink" title="vagrant 常用命令"></a>vagrant 常用命令</h2><h5 id="使用-vagrant-help-查看命令格式及常用命令"><a href="#使用-vagrant-help-查看命令格式及常用命令" class="headerlink" title="使用 vagrant --help 查看命令格式及常用命令"></a>使用 <code>vagrant --help</code> 查看命令格式及常用命令</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">λ vagrant --help                                                                                                 </span><br><span class="line">Usage: vagrant [options] &lt;command&gt; [&lt;args&gt;]                                                                      </span><br><span class="line">                                                                                                                 </span><br><span class="line">    -h, --help                       Print this help.                                                            </span><br><span class="line">                                                                                                                 </span><br><span class="line">Common commands:                                                                                                 </span><br><span class="line">     box             manages boxes: installation, removal, etc.                                                  </span><br><span class="line">     cloud           manages everything related to Vagrant Cloud                                                 </span><br><span class="line">     destroy         stops and deletes all traces of the vagrant machine                                         </span><br><span class="line">     global-status   outputs status Vagrant environments for this user                                           </span><br><span class="line">     halt            stops the vagrant machine                                                                   </span><br><span class="line">     help            shows the help for a subcommand                                                             </span><br><span class="line">     init            initializes a new Vagrant environment by creating a Vagrantfile                             </span><br><span class="line">     login                                                                                                       </span><br><span class="line">     package         packages a running vagrant environment into a box                                           </span><br><span class="line">     plugin          manages plugins: install, uninstall, update, etc.                                           </span><br><span class="line">     port            displays information about guest port mappings                                              </span><br><span class="line">     powershell      connects to machine via powershell remoting                                                 </span><br><span class="line">     provision       provisions the vagrant machine                                                              </span><br><span class="line">     push            deploys code in this environment to a configured destination                                </span><br><span class="line">     rdp             connects to machine via RDP                                                                 </span><br><span class="line">     reload          restarts vagrant machine, loads new Vagrantfile configuration                               </span><br><span class="line">     resume          resume a suspended vagrant machine                                                          </span><br><span class="line">     snapshot        manages snapshots: saving, restoring, etc.                                                  </span><br><span class="line">     ssh             connects to machine via SSH                                                                 </span><br><span class="line">     ssh-config      outputs OpenSSH valid configuration to connect to the machine                               </span><br><span class="line">     status          outputs status of the vagrant machine                                                       </span><br><span class="line">     suspend         suspends the machine                                                                        </span><br><span class="line">     up              starts and provisions the vagrant environment                                               </span><br><span class="line">     upload          upload to machine via communicator                                                          </span><br><span class="line">     validate        validates the Vagrantfile                                                                   </span><br><span class="line">     version         prints current and latest Vagrant version                                                   </span><br><span class="line">     winrm           executes commands on a machine via WinRM                                                    </span><br><span class="line">     winrm-config    outputs WinRM configuration to connect to the machine                                       </span><br><span class="line">                                                                                                                 </span><br><span class="line">For help on any individual command run `vagrant COMMAND -h`                                                      </span><br><span class="line">                                                                                                                 </span><br><span class="line">Additional subcommands are available, but are either more advanced                                               </span><br><span class="line">or not commonly used. To see all subcommands, run the command                                                    </span><br><span class="line">`vagrant list-commands`.                                                                                         </span><br><span class="line">        --[no-]color                 Enable or disable color output                                              </span><br><span class="line">        --machine-readable           Enable machine readable output                                              </span><br><span class="line">    -v, --version                    Display Vagrant version                                                     </span><br><span class="line">        --debug                      Enable debug output                                                         </span><br><span class="line">        --timestamp                  Enable timestamps on log output                                             </span><br><span class="line">        --debug-timestamp            Enable debug output with timestamps                                         </span><br><span class="line">        --no-tty                     Enable non-interactive output</span><br></pre></td></tr></table></figure>

<h5 id="管理box"><a href="#管理box" class="headerlink" title="管理box"></a>管理box</h5><p>首先可以执行 <code>vagrant box --help</code> 命令查看如何管理box</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">λ vagrant box --help</span><br><span class="line">Usage: vagrant box &lt;subcommand&gt; [&lt;args&gt;]</span><br><span class="line"></span><br><span class="line">Available subcommands:</span><br><span class="line">     add</span><br><span class="line">     list</span><br><span class="line">     outdated</span><br><span class="line">     prune</span><br><span class="line">     remove</span><br><span class="line">     repackage</span><br><span class="line">     update</span><br><span class="line"></span><br><span class="line">For help on any individual subcommand run `vagrant box &lt;subcommand&gt; -h`</span><br><span class="line">        --[no-]color                 Enable or disable color output</span><br><span class="line">        --machine-readable           Enable machine readable output</span><br><span class="line">    -v, --version                    Display Vagrant version</span><br><span class="line">        --debug                      Enable debug output</span><br><span class="line">        --timestamp                  Enable timestamps on log output</span><br><span class="line">        --debug-timestamp            Enable debug output with timestamps</span><br><span class="line">        --no-tty                     Enable non-interactive output</span><br></pre></td></tr></table></figure>

<ul>
<li>添加 box</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">λ vagrant box add laravel/homestead</span><br></pre></td></tr></table></figure>

<p><img src="https://loouss-1252083494.cos.ap-chongqing.myqcloud.com/blog/vagrant1.png" alt="box下载地址"></p>
<blockquote>
<p>如果 box下载缓慢，可以用其他方式下载box，然后从本地安装box</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://loouss.github.io/2020/05/12/vagrant/" data-id="ckdx01u2s000k38oreq2dfou0" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">Next &amp;raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/RabbitMQ/" rel="tag">RabbitMQ</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/" rel="tag">docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/" rel="tag">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jenkins/" rel="tag">jenkins</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/" rel="tag">mysql</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/RabbitMQ/" style="font-size: 10px;">RabbitMQ</a> <a href="/tags/docker/" style="font-size: 20px;">docker</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/jenkins/" style="font-size: 10px;">jenkins</a> <a href="/tags/mysql/" style="font-size: 10px;">mysql</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/08/16/%E5%AF%B9%E5%9B%BE%E7%89%87%E6%8C%89%E6%8B%8D%E6%92%92%E8%AE%BE%E5%A4%87%E5%92%8C%E6%97%B6%E9%97%B4%E5%88%86%E7%BB%84/">对图片按拍撒设备和时间分组</a>
          </li>
        
          <li>
            <a href="/2020/08/16/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2020/08/10/docker%E8%BF%90%E8%A1%8Cyapi/">docker运行yapi</a>
          </li>
        
          <li>
            <a href="/2020/08/09/docker%E8%BF%90%E8%A1%8Cgitlab/">docker运行gitlab</a>
          </li>
        
          <li>
            <a href="/2020/08/04/alpine%E9%95%9C%E5%83%8Fapk%E6%BA%90%E4%BF%AE%E6%94%B9/">alpine镜像apk源修改</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 Loouss<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>